/*
https://csv.js.org/parse
minified using Google Closure tools by pigrammer

The MIT License (MIT)

Copyright (c) 2010 Adaltas

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
'use strict';var csv_parse_sync=function(Y){function ea(){Z=!0;for(var b=0;64>b;++b)E[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b],B["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(b)]=b;B[45]=62;B[95]=63}function fa(b){Z||ea();for(var a=b.length,c=a%3,d="",e=[],f=0,h=a-c;f<h;f+=16383){for(var k=e,l=k.push,m,q=b,z=f+16383>h?h:f+16383,H=[],F=f;F<z;F+=3)m=(q[F]<<16)+(q[F+1]<<8)+q[F+2],H.push(E[m>>18&63]+E[m>>12&63]+E[m>>6&63]+E[m&63]);m=H.join("");
l.call(k,m)}1===c?(b=b[a-1],d+=E[b>>2],d+=E[b<<4&63],d+="=="):2===c&&(b=(b[a-2]<<8)+b[a-1],d+=E[b>>10],d+=E[b>>4&63],d+=E[b<<2&63],d+="=");e.push(d);return e.join("")}function Q(b,a,c,d,e){var f=8*e-d-1;var h=(1<<f)-1,k=h>>1,l=-7;e=c?e-1:0;var m=c?-1:1,q=b[a+e];e+=m;c=q&(1<<-l)-1;q>>=-l;for(l+=f;0<l;c=256*c+b[a+e],e+=m,l-=8);f=c&(1<<-l)-1;c>>=-l;for(l+=d;0<l;f=256*f+b[a+e],e+=m,l-=8);if(0===c)c=1-k;else{if(c===h)return f?NaN:Infinity*(q?-1:1);f+=Math.pow(2,d);c-=k}return(q?-1:1)*f*Math.pow(2,c-d)}
function R(b,a,c,d,e,f){var h,k=8*f-e-1,l=(1<<k)-1,m=l>>1,q=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;f=d?0:f-1;var z=d?1:-1,H=0>a||0===a&&0>1/a?1:0;a=Math.abs(a);isNaN(a)||Infinity===a?(a=isNaN(a)?1:0,d=l):(d=Math.floor(Math.log(a)/Math.LN2),1>a*(h=Math.pow(2,-d))&&(d--,h*=2),a=1<=d+m?a+q/h:a+q*Math.pow(2,1-m),2<=a*h&&(d++,h/=2),d+m>=l?(a=0,d=l):1<=d+m?(a=(a*h-1)*Math.pow(2,e),d+=m):(a=a*Math.pow(2,m-1)*Math.pow(2,e),d=0));for(;8<=e;b[c+f]=a&255,f+=z,a/=256,e-=8);d=d<<e|a;for(k+=e;0<k;b[c+f]=d&255,
f+=z,d/=256,k-=8);b[c+f-z]|=128*H}function I(b,a){if((g.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<a)throw new RangeError("Invalid typed array length");g.TYPED_ARRAY_SUPPORT?(b=new Uint8Array(a),b.__proto__=g.prototype):(null===b&&(b=new g(a)),b.length=a);return b}function g(b,a,c){if(!(g.TYPED_ARRAY_SUPPORT||this instanceof g))return new g(b,a,c);if("number"===typeof b){if("string"===typeof a)throw Error("If encoding is specified then the first argument must be a string");return aa(this,b)}return ha(this,
b,a,c)}function ha(b,a,c,d){if("number"===typeof a)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&a instanceof ArrayBuffer){a.byteLength;if(0>c||a.byteLength<c)throw new RangeError("'offset' is out of bounds");if(a.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");a=void 0===c&&void 0===d?new Uint8Array(a):void 0===d?new Uint8Array(a,c):new Uint8Array(a,c,d);g.TYPED_ARRAY_SUPPORT?(b=a,b.__proto__=g.prototype):b=ba(b,a);return b}if("string"===
typeof a){d=b;b=c;if("string"!==typeof b||""===b)b="utf8";if(!g.isEncoding(b))throw new TypeError('"encoding" must be a valid string encoding');c=ia(a,b)|0;d=I(d,c);a=d.write(a,b);a!==c&&(d=d.slice(0,a));return d}return xa(b,a)}function ja(b){if("number"!==typeof b)throw new TypeError('"size" argument must be a number');if(0>b)throw new RangeError('"size" argument must not be negative');}function aa(b,a){ja(a);b=I(b,0>a?0:ca(a)|0);if(!g.TYPED_ARRAY_SUPPORT)for(var c=0;c<a;++c)b[c]=0;return b}function ba(b,
a){var c=0>a.length?0:ca(a.length)|0;b=I(b,c);for(var d=0;d<c;d+=1)b[d]=a[d]&255;return b}function xa(b,a){if(G(a)){var c=ca(a.length)|0;b=I(b,c);if(0===b.length)return b;a.copy(b,0,0,c);return b}if(a){if("undefined"!==typeof ArrayBuffer&&a.buffer instanceof ArrayBuffer||"length"in a)return(c="number"!==typeof a.length)||(c=a.length,c=c!==c),c?I(b,0):ba(b,a);if("Buffer"===a.type&&ka(a.data))return ba(b,a.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}function ca(b){if(b>=(g.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(g.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return b|0}function G(b){return!(null==b||!b._isBuffer)}function ia(b,a){if(G(b))return b.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(b)||b instanceof ArrayBuffer))return b.byteLength;"string"!==typeof b&&(b=""+b);var c=b.length;
if(0===c)return 0;for(var d=!1;;)switch(a){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":case void 0:return S(b).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return la(b).length;default:if(d)return S(b).length;a=(""+a).toLowerCase();d=!0}}function ya(b,a,c){var d=!1;if(void 0===a||0>a)a=0;if(a>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;a>>>=0;if(c<=a)return"";
for(b||="utf8";;)switch(b){case "hex":b=a;a=this.length;if(!b||0>b)b=0;if(!c||0>c||c>a)c=a;for(a="";b<c;++b)d=this[b],d=16>d?"0"+d.toString(16):d.toString(16),a+=d;return a;case "utf8":case "utf-8":return ma(this,a,c);case "ascii":b=a;a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]&127);return a;case "latin1":case "binary":b=a;a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);return a;case "base64":return b=a,c=0===b&&c===this.length?fa(this):fa(this.slice(b,
c)),c;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=this.slice(a,c);b="";for(a=0;a<c.length;a+=2)b+=String.fromCharCode(c[a]+256*c[a+1]);return b;default:if(d)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();d=!0}}function L(b,a,c){var d=b[a];b[a]=b[c];b[c]=d}function na(b,a,c,d,e){if(0===b.length)return-1;"string"===typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c=+c;isNaN(c)&&(c=e?0:b.length-1);0>c&&(c=b.length+c);if(c>=b.length){if(e)return-1;
c=b.length-1}else if(0>c)if(e)c=0;else return-1;"string"===typeof a&&(a=g.from(a,d));if(G(a))return 0===a.length?-1:oa(b,a,c,d,e);if("number"===typeof a)return a&=255,g.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(b,a,c):Uint8Array.prototype.lastIndexOf.call(b,a,c):oa(b,[a],c,d,e);throw new TypeError("val must be string, number or Buffer");}function oa(b,a,c,d,e){function f(m,q){return 1===h?m[q]:m.readUInt16BE(q*h)}var h=1,k=b.length,l=
a.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>b.length||2>a.length)return-1;h=2;k/=2;l/=2;c/=2}if(e)for(d=-1;c<k;c++)if(f(b,c)===f(a,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===l)return d*h}else-1!==d&&(c-=c-d),d=-1;else for(c+l>k&&(c=k-l);0<=c;c--){k=!0;for(d=0;d<l;d++)if(f(b,c+d)!==f(a,d)){k=!1;break}if(k)return c}return-1}function ma(b,a,c){c=Math.min(b.length,c);for(var d=[];a<c;){var e=b[a],f=null,h=239<e?4:223<e?3:191<e?2:1;if(a+
h<=c)switch(h){case 1:128>e&&(f=e);break;case 2:var k=b[a+1];128===(k&192)&&(e=(e&31)<<6|k&63,127<e&&(f=e));break;case 3:k=b[a+1];var l=b[a+2];128===(k&192)&&128===(l&192)&&(e=(e&15)<<12|(k&63)<<6|l&63,2047<e&&(55296>e||57343<e)&&(f=e));break;case 4:k=b[a+1];l=b[a+2];var m=b[a+3];128===(k&192)&&128===(l&192)&&128===(m&192)&&(e=(e&15)<<18|(k&63)<<12|(l&63)<<6|m&63,65535<e&&1114112>e&&(f=e))}null===f?(f=65533,h=1):65535<f&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|f&1023);d.push(f);a+=h}b=d.length;
if(b<=pa)d=String.fromCharCode.apply(String,d);else{c="";for(a=0;a<b;)c+=String.fromCharCode.apply(String,d.slice(a,a+=pa));d=c}return d}function x(b,a,c){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+a>c)throw new RangeError("Trying to access beyond buffer length");}function A(b,a,c,d,e,f){if(!G(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>e||a<f)throw new RangeError('"value" argument is out of bounds');if(c+d>b.length)throw new RangeError("Index out of range");
}function T(b,a,c,d){0>a&&(a=65535+a+1);for(var e=0,f=Math.min(b.length-c,2);e<f;++e)b[c+e]=(a&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function U(b,a,c,d){0>a&&(a=4294967295+a+1);for(var e=0,f=Math.min(b.length-c,4);e<f;++e)b[c+e]=a>>>8*(d?e:3-e)&255}function V(b,a,c,d,e,f){if(c+d>b.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");}function S(b,a){a=a||Infinity;for(var c,d=b.length,e=null,f=[],h=0;h<d;++h){c=b.charCodeAt(h);if(55295<c&&57344>c){if(!e){if(56319<
c){-1<(a-=3)&&f.push(239,191,189);continue}else if(h+1===d){-1<(a-=3)&&f.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(a-=3)&&f.push(239,191,189);e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(a-=3)&&f.push(239,191,189);e=null;if(128>c){if(0>--a)break;f.push(c)}else if(2048>c){if(0>(a-=2))break;f.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(a-=3))break;f.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(a-=4))break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");
}return f}function qa(b){for(var a=[],c=0;c<b.length;++c)a.push(b.charCodeAt(c)&255);return a}function la(b){b=(b.trim?b.trim():b.replace(/^\s+|\s+$/g,"")).replace(za,"");if(2>b.length)b="";else for(;0!==b.length%4;)b+="=";Z||ea();var a=b.length;if(0<a%4)throw Error("Invalid string. Length must be a multiple of 4");var c="="===b[a-2]?2:"="===b[a-1]?1:0;var d=new Aa(3*a/4-c);var e=0<c?a-4:a;var f=0;for(a=0;a<e;a+=4){var h=B[b.charCodeAt(a)]<<18|B[b.charCodeAt(a+1)]<<12|B[b.charCodeAt(a+2)]<<6|B[b.charCodeAt(a+
3)];d[f++]=h>>16&255;d[f++]=h>>8&255;d[f++]=h&255}2===c?(h=B[b.charCodeAt(a)]<<2|B[b.charCodeAt(a+1)]>>4,d[f++]=h&255):1===c&&(h=B[b.charCodeAt(a)]<<10|B[b.charCodeAt(a+1)]<<4|B[b.charCodeAt(a+2)]>>2,d[f++]=h>>8&255,d[f++]=h&255);return d}function P(b,a,c,d){for(var e=0;e<d&&!(e+c>=a.length||e>=b.length);++e)a[e+c]=b[e];return e}function C(b){return null!=b&&(!!b._isBuffer||ra(b)||"function"===typeof b.readFloatLE&&"function"===typeof b.slice&&ra(b.slice(0,0)))}function ra(b){return!!b.constructor&&
"function"===typeof b.constructor.isBuffer&&b.constructor.isBuffer(b)}var sa="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},E=[],B=[],Aa="undefined"!==typeof Uint8Array?Uint8Array:Array,Z=!1,Ba={}.toString,ka=Array.isArray||function(b){return"[object Array]"==Ba.call(b)};g.TYPED_ARRAY_SUPPORT=void 0!==sa.TYPED_ARRAY_SUPPORT?sa.TYPED_ARRAY_SUPPORT:!0;g.poolSize=8192;g._augment=function(b){b.__proto__=g.prototype;return b};g.from=function(b,a,
c){return ha(null,b,a,c)};g.TYPED_ARRAY_SUPPORT&&(g.prototype.__proto__=Uint8Array.prototype,g.__proto__=Uint8Array);g.alloc=function(b,a,c){ja(b);b=0>=b?I(null,b):void 0!==a?"string"===typeof c?I(null,b).fill(a,c):I(null,b).fill(a):I(null,b);return b};g.allocUnsafe=function(b){return aa(null,b)};g.allocUnsafeSlow=function(b){return aa(null,b)};g.isBuffer=C;g.compare=function(b,a){if(!G(b)||!G(a))throw new TypeError("Arguments must be Buffers");if(b===a)return 0;for(var c=b.length,d=a.length,e=0,
f=Math.min(c,d);e<f;++e)if(b[e]!==a[e]){c=b[e];d=a[e];break}return c<d?-1:d<c?1:0};g.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};g.concat=function(b,a){if(!ka(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return g.alloc(0);var c;if(void 0===a)for(c=a=0;c<b.length;++c)a+=b[c].length;
a=g.allocUnsafe(a);var d=0;for(c=0;c<b.length;++c){var e=b[c];if(!G(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(a,d);d+=e.length}return a};g.byteLength=ia;g.prototype._isBuffer=!0;g.prototype.swap16=function(){var b=this.length;if(0!==b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<b;a+=2)L(this,a,a+1);return this};g.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");
for(var a=0;a<b;a+=4)L(this,a,a+3),L(this,a+1,a+2);return this};g.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<b;a+=8)L(this,a,a+7),L(this,a+1,a+6),L(this,a+2,a+5),L(this,a+3,a+4);return this};g.prototype.toString=function(){var b=this.length|0;return 0===b?"":0===arguments.length?ma(this,0,b):ya.apply(this,arguments)};g.prototype.equals=function(b){if(!G(b))throw new TypeError("Argument must be a Buffer");
return this===b?!0:0===g.compare(this,b)};g.prototype.inspect=function(){var b="";0<this.length&&(b=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(b+=" ... "));return"<Buffer "+b+">"};g.prototype.compare=function(b,a,c,d,e){if(!G(b))throw new TypeError("Argument must be a Buffer");void 0===a&&(a=0);void 0===c&&(c=b?b.length:0);void 0===d&&(d=0);void 0===e&&(e=this.length);if(0>a||c>b.length||0>d||e>this.length)throw new RangeError("out of range index");if(d>=e&&a>=c)return 0;
if(d>=e)return-1;if(a>=c)return 1;a>>>=0;c>>>=0;d>>>=0;e>>>=0;if(this===b)return 0;var f=e-d,h=c-a,k=Math.min(f,h);d=this.slice(d,e);b=b.slice(a,c);for(a=0;a<k;++a)if(d[a]!==b[a]){f=d[a];h=b[a];break}return f<h?-1:h<f?1:0};g.prototype.includes=function(b,a,c){return-1!==this.indexOf(b,a,c)};g.prototype.indexOf=function(b,a,c){return na(this,b,a,c,!0)};g.prototype.lastIndexOf=function(b,a,c){return na(this,b,a,c,!1)};g.prototype.write=function(b,a,c,d){if(void 0===a)d="utf8",c=this.length,a=0;else if(void 0===
c&&"string"===typeof a)d=a,c=this.length,a=0;else if(isFinite(a))a|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-a;if(void 0===c||c>e)c=e;if(0<b.length&&(0>c||0>a)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||="utf8";for(e=!1;;)switch(d){case "hex":a:{a=Number(a)||0;d=this.length-a;c?(c=Number(c),c>d&&(c=d)):c=d;d=b.length;if(0!==d%2)throw new TypeError("Invalid hex string");
c>d/2&&(c=d/2);for(d=0;d<c;++d){e=parseInt(b.substr(2*d,2),16);if(isNaN(e)){b=d;break a}this[a+d]=e}b=d}return b;case "utf8":case "utf-8":return P(S(b,this.length-a),this,a,c);case "ascii":return P(qa(b),this,a,c);case "latin1":case "binary":return P(qa(b),this,a,c);case "base64":return P(la(b),this,a,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=b;e=this.length-a;for(var f=[],h=0;h<d.length&&!(0>(e-=2));++h){var k=d.charCodeAt(h);b=k>>8;k%=256;f.push(k);f.push(b)}return P(f,this,a,
c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();e=!0}};g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var pa=4096;g.prototype.slice=function(b,a){var c=this.length;b=~~b;a=void 0===a?c:~~a;0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);a<b&&(a=b);if(g.TYPED_ARRAY_SUPPORT)a=this.subarray(b,a),a.__proto__=g.prototype;else{c=a-b;a=new g(c,void 0);for(var d=0;d<c;++d)a[d]=this[d+b]}return a};
g.prototype.readUIntLE=function(b,a,c){b|=0;a|=0;c||x(b,a,this.length);c=this[b];for(var d=1,e=0;++e<a&&(d*=256);)c+=this[b+e]*d;return c};g.prototype.readUIntBE=function(b,a,c){b|=0;a|=0;c||x(b,a,this.length);c=this[b+--a];for(var d=1;0<a&&(d*=256);)c+=this[b+--a]*d;return c};g.prototype.readUInt8=function(b,a){a||x(b,1,this.length);return this[b]};g.prototype.readUInt16LE=function(b,a){a||x(b,2,this.length);return this[b]|this[b+1]<<8};g.prototype.readUInt16BE=function(b,a){a||x(b,2,this.length);
return this[b]<<8|this[b+1]};g.prototype.readUInt32LE=function(b,a){a||x(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};g.prototype.readUInt32BE=function(b,a){a||x(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};g.prototype.readIntLE=function(b,a,c){b|=0;a|=0;c||x(b,a,this.length);c=this[b];for(var d=1,e=0;++e<a&&(d*=256);)c+=this[b+e]*d;c>=128*d&&(c-=Math.pow(2,8*a));return c};g.prototype.readIntBE=function(b,a,c){b|=0;a|=0;c||x(b,
a,this.length);c=a;for(var d=1,e=this[b+--c];0<c&&(d*=256);)e+=this[b+--c]*d;e>=128*d&&(e-=Math.pow(2,8*a));return e};g.prototype.readInt8=function(b,a){a||x(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};g.prototype.readInt16LE=function(b,a){a||x(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};g.prototype.readInt16BE=function(b,a){a||x(b,2,this.length);b=this[b+1]|this[b]<<8;return b&32768?b|4294901760:b};g.prototype.readInt32LE=function(b,a){a||x(b,4,this.length);
return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};g.prototype.readInt32BE=function(b,a){a||x(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};g.prototype.readFloatLE=function(b,a){a||x(b,4,this.length);return Q(this,b,!0,23,4)};g.prototype.readFloatBE=function(b,a){a||x(b,4,this.length);return Q(this,b,!1,23,4)};g.prototype.readDoubleLE=function(b,a){a||x(b,8,this.length);return Q(this,b,!0,52,8)};g.prototype.readDoubleBE=function(b,a){a||x(b,8,this.length);return Q(this,
b,!1,52,8)};g.prototype.writeUIntLE=function(b,a,c,d){b=+b;a|=0;c|=0;d||A(this,b,a,c,Math.pow(2,8*c)-1,0);d=1;var e=0;for(this[a]=b&255;++e<c&&(d*=256);)this[a+e]=b/d&255;return a+c};g.prototype.writeUIntBE=function(b,a,c,d){b=+b;a|=0;c|=0;d||A(this,b,a,c,Math.pow(2,8*c)-1,0);d=c-1;var e=1;for(this[a+d]=b&255;0<=--d&&(e*=256);)this[a+d]=b/e&255;return a+c};g.prototype.writeUInt8=function(b,a,c){b=+b;a|=0;c||A(this,b,a,1,255,0);g.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));this[a]=b&255;return a+1};g.prototype.writeUInt16LE=
function(b,a,c){b=+b;a|=0;c||A(this,b,a,2,65535,0);g.TYPED_ARRAY_SUPPORT?(this[a]=b&255,this[a+1]=b>>>8):T(this,b,a,!0);return a+2};g.prototype.writeUInt16BE=function(b,a,c){b=+b;a|=0;c||A(this,b,a,2,65535,0);g.TYPED_ARRAY_SUPPORT?(this[a]=b>>>8,this[a+1]=b&255):T(this,b,a,!1);return a+2};g.prototype.writeUInt32LE=function(b,a,c){b=+b;a|=0;c||A(this,b,a,4,4294967295,0);g.TYPED_ARRAY_SUPPORT?(this[a+3]=b>>>24,this[a+2]=b>>>16,this[a+1]=b>>>8,this[a]=b&255):U(this,b,a,!0);return a+4};g.prototype.writeUInt32BE=
function(b,a,c){b=+b;a|=0;c||A(this,b,a,4,4294967295,0);g.TYPED_ARRAY_SUPPORT?(this[a]=b>>>24,this[a+1]=b>>>16,this[a+2]=b>>>8,this[a+3]=b&255):U(this,b,a,!1);return a+4};g.prototype.writeIntLE=function(b,a,c,d){b=+b;a|=0;d||(d=Math.pow(2,8*c-1),A(this,b,a,c,d-1,-d));d=0;var e=1,f=0;for(this[a]=b&255;++d<c&&(e*=256);)0>b&&0===f&&0!==this[a+d-1]&&(f=1),this[a+d]=(b/e>>0)-f&255;return a+c};g.prototype.writeIntBE=function(b,a,c,d){b=+b;a|=0;d||(d=Math.pow(2,8*c-1),A(this,b,a,c,d-1,-d));d=c-1;var e=1,
f=0;for(this[a+d]=b&255;0<=--d&&(e*=256);)0>b&&0===f&&0!==this[a+d+1]&&(f=1),this[a+d]=(b/e>>0)-f&255;return a+c};g.prototype.writeInt8=function(b,a,c){b=+b;a|=0;c||A(this,b,a,1,127,-128);g.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));0>b&&(b=255+b+1);this[a]=b&255;return a+1};g.prototype.writeInt16LE=function(b,a,c){b=+b;a|=0;c||A(this,b,a,2,32767,-32768);g.TYPED_ARRAY_SUPPORT?(this[a]=b&255,this[a+1]=b>>>8):T(this,b,a,!0);return a+2};g.prototype.writeInt16BE=function(b,a,c){b=+b;a|=0;c||A(this,b,a,2,
32767,-32768);g.TYPED_ARRAY_SUPPORT?(this[a]=b>>>8,this[a+1]=b&255):T(this,b,a,!1);return a+2};g.prototype.writeInt32LE=function(b,a,c){b=+b;a|=0;c||A(this,b,a,4,2147483647,-2147483648);g.TYPED_ARRAY_SUPPORT?(this[a]=b&255,this[a+1]=b>>>8,this[a+2]=b>>>16,this[a+3]=b>>>24):U(this,b,a,!0);return a+4};g.prototype.writeInt32BE=function(b,a,c){b=+b;a|=0;c||A(this,b,a,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);g.TYPED_ARRAY_SUPPORT?(this[a]=b>>>24,this[a+1]=b>>>16,this[a+2]=b>>>8,this[a+3]=b&255):
U(this,b,a,!1);return a+4};g.prototype.writeFloatLE=function(b,a,c){c||V(this,b,a,4);R(this,b,a,!0,23,4);return a+4};g.prototype.writeFloatBE=function(b,a,c){c||V(this,b,a,4);R(this,b,a,!1,23,4);return a+4};g.prototype.writeDoubleLE=function(b,a,c){c||V(this,b,a,8);R(this,b,a,!0,52,8);return a+8};g.prototype.writeDoubleBE=function(b,a,c){c||V(this,b,a,8);R(this,b,a,!1,52,8);return a+8};g.prototype.copy=function(b,a,c,d){c||=0;d||0===d||(d=this.length);a>=b.length&&(a=b.length);a||=0;0<d&&d<c&&(d=
c);if(d===c||0===b.length||0===this.length)return 0;if(0>a)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);b.length-a<d-c&&(d=b.length-a+c);var e=d-c;if(this===b&&c<a&&a<d)for(d=e-1;0<=d;--d)b[d+a]=this[d+c];else if(1E3>e||!g.TYPED_ARRAY_SUPPORT)for(d=0;d<e;++d)b[d+a]=this[d+c];else Uint8Array.prototype.set.call(b,this.subarray(c,c+e),a);
return e};g.prototype.fill=function(b,a,c,d){if("string"===typeof b){"string"===typeof a?(d=a,a=0,c=this.length):"string"===typeof c&&(d=c,c=this.length);if(1===b.length){var e=b.charCodeAt(0);256>e&&(b=e)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!g.isEncoding(d))throw new TypeError("Unknown encoding: "+d);}else"number"===typeof b&&(b&=255);if(0>a||this.length<a||this.length<c)throw new RangeError("Out of range index");if(c<=a)return this;
a>>>=0;c=void 0===c?this.length:c>>>0;b||=0;if("number"===typeof b)for(d=a;d<c;++d)this[d]=b;else for(b=G(b)?b:S((new g(b,d)).toString()),e=b.length,d=0;d<c-a;++d)this[d+a]=b[d%e];return this};var za=/[^+\/0-9A-Za-z-_]/g;class p extends Error{constructor(b,a,c,...d){Array.isArray(a)&&(a=a.join(" ").trim());super(a);void 0!==Error.captureStackTrace&&Error.captureStackTrace(this,p);this.code=b;for(const e of d)for(const f in e)b=e[f],this[f]=C(b)?b.toString(c.encoding):null==b?b:JSON.parse(JSON.stringify(b))}}
const ta=function(b){const a=[];for(let c=0,d=b.length;c<d;c++){const e=b[c];if(void 0===e||null===e||!1===e)a[c]={disabled:!0};else if("string"===typeof e)a[c]={name:e};else{if("object"!==typeof e||null===e||Array.isArray(e))throw new p("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(e)} at position ${c}`]);if("string"!==typeof e.name)throw new p("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",`property "name" is required at position ${c}`,
"when column is an object literal"]);a[c]=e}}return a};class ua{constructor(b=100){this.size=b;this.length=0;this.buf=g.allocUnsafe(b)}prepend(b){if(C(b)){var a=this.length+b.length;if(a>=this.size&&(this.resize(),a>=this.size))throw Error("INVALID_BUFFER_STATE");a=this.buf;this.buf=g.allocUnsafe(this.size);b.copy(this.buf,0);a.copy(this.buf,b.length);this.length+=b.length}else{a=this.length++;a===this.size&&this.resize();const c=this.clone();this.buf[0]=b;c.copy(this.buf,1,0,a)}}append(b){const a=
this.length++;a===this.size&&this.resize();this.buf[a]=b}clone(){return g.from(this.buf.slice(0,this.length))}resize(){const b=this.length;this.size*=2;const a=g.allocUnsafe(this.size);this.buf.copy(a,0,0,b);this.buf=a}toString(b){return b?this.buf.slice(0,this.length).toString(b):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}}const Ca=function(b){return{bomSkipped:!1,bufBytesStart:0,castField:b.cast_function,commenting:!1,
error:void 0,enabled:1===b.from_line,escaping:!1,escapeIsQuote:C(b.escape)&&C(b.quote)&&0===g.compare(b.escape,b.quote),expectedRecordLength:Array.isArray(b.columns)?b.columns.length:void 0,field:new ua(20),firstLineToHeaders:b.cast_first_line_to_header,needMoreDataSize:Math.max(null!==b.comment?b.comment.length:0,...b.delimiter.map(a=>a.length),null!==b.quote?b.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new ua(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:0===
b.record_delimiter.length?0:Math.max(...b.record_delimiter.map(a=>a.length)),trimChars:[g.from(" ",b.encoding)[0],g.from("\t",b.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[g.from(g.from([13],"utf8").toString(),b.encoding),g.from(g.from([10],"utf8").toString(),b.encoding),g.from(g.from([12],"utf8").toString(),b.encoding),g.from(g.from([32],"utf8").toString(),b.encoding),g.from(g.from([9],"utf8").toString(),b.encoding)]}},Da=function(b){return b.replace(/([A-Z])/g,function(a,c){return"_"+
c.toLowerCase()})},va=function(b){const a={};for(const d in b)a[Da(d)]=b[d];if(void 0===a.encoding||!0===a.encoding)a.encoding="utf8";else if(null===a.encoding||!1===a.encoding)a.encoding=null;else if("string"!==typeof a.encoding&&null!==a.encoding)throw new p("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,",`got ${JSON.stringify(a.encoding)}`],a);if(void 0===a.bom||null===a.bom||!1===a.bom)a.bom=!1;else if(!0!==a.bom)throw new p("CSV_INVALID_OPTION_BOM",
["Invalid option bom:","bom must be true,",`got ${JSON.stringify(a.bom)}`],a);a.cast_function=null;if(void 0===a.cast||null===a.cast||!1===a.cast||""===a.cast)a.cast=void 0;else if("function"===typeof a.cast)a.cast_function=a.cast,a.cast=!0;else if(!0!==a.cast)throw new p("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,",`got ${JSON.stringify(a.cast)}`],a);if(void 0===a.cast_date||null===a.cast_date||!1===a.cast_date||""===a.cast_date)a.cast_date=!1;else if(!0===
a.cast_date)a.cast_date=function(d){const e=Date.parse(d);return isNaN(e)?d:new Date(e)};else if("function"!==typeof a.cast_date)throw new p("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,",`got ${JSON.stringify(a.cast_date)}`],a);a.cast_first_line_to_header=null;if(!0===a.columns)a.cast_first_line_to_header=void 0;else if("function"===typeof a.columns)a.cast_first_line_to_header=a.columns,a.columns=!0;else if(Array.isArray(a.columns))a.columns=ta(a.columns);
else if(void 0===a.columns||null===a.columns||!1===a.columns)a.columns=!1;else throw new p("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,",`got ${JSON.stringify(a.columns)}`],a);if(void 0===a.group_columns_by_name||null===a.group_columns_by_name||!1===a.group_columns_by_name)a.group_columns_by_name=!1;else{if(!0!==a.group_columns_by_name)throw new p("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,",
`got ${JSON.stringify(a.group_columns_by_name)}`],a);if(!1===a.columns)throw new p("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],a);}if(void 0===a.comment||null===a.comment||!1===a.comment||""===a.comment)a.comment=null;else if("string"===typeof a.comment&&(a.comment=g.from(a.comment,a.encoding)),!C(a.comment))throw new p("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,",`got ${JSON.stringify(a.comment)}`],
a);if(void 0===a.comment_no_infix||null===a.comment_no_infix||!1===a.comment_no_infix)a.comment_no_infix=!1;else if(!0!==a.comment_no_infix)throw new p("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,",`got ${JSON.stringify(a.comment_no_infix)}`],a);const c=JSON.stringify(a.delimiter);Array.isArray(a.delimiter)||(a.delimiter=[a.delimiter]);if(0===a.delimiter.length)throw new p("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",
`got ${c}`],a);a.delimiter=a.delimiter.map(function(d){if(void 0===d||null===d||!1===d)return g.from(",",a.encoding);"string"===typeof d&&(d=g.from(d,a.encoding));if(!C(d)||0===d.length)throw new p("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,",`got ${c}`],a);return d});if(void 0===a.escape||!0===a.escape)a.escape=g.from('"',a.encoding);else if("string"===typeof a.escape)a.escape=g.from(a.escape,a.encoding);else if(null===
a.escape||!1===a.escape)a.escape=null;if(null!==a.escape&&!C(a.escape))throw Error(`Invalid Option: escape must be a buffer, a string or a boolean, got ${JSON.stringify(a.escape)}`);if(void 0===a.from||null===a.from)a.from=1;else if("string"===typeof a.from&&/\d+/.test(a.from)&&(a.from=parseInt(a.from)),Number.isInteger(a.from)){if(0>a.from)throw Error(`Invalid Option: from must be a positive integer, got ${JSON.stringify(b.from)}`);}else throw Error(`Invalid Option: from must be an integer, got ${JSON.stringify(a.from)}`);
if(void 0===a.from_line||null===a.from_line)a.from_line=1;else if("string"===typeof a.from_line&&/\d+/.test(a.from_line)&&(a.from_line=parseInt(a.from_line)),Number.isInteger(a.from_line)){if(0>=a.from_line)throw Error(`Invalid Option: from_line must be a positive integer greater than 0, got ${JSON.stringify(b.from_line)}`);}else throw Error(`Invalid Option: from_line must be an integer, got ${JSON.stringify(b.from_line)}`);if(void 0===a.ignore_last_delimiters||null===a.ignore_last_delimiters)a.ignore_last_delimiters=
!1;else if("number"===typeof a.ignore_last_delimiters)a.ignore_last_delimiters=Math.floor(a.ignore_last_delimiters),0===a.ignore_last_delimiters&&(a.ignore_last_delimiters=!1);else if("boolean"!==typeof a.ignore_last_delimiters)throw new p("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,",`got ${JSON.stringify(a.ignore_last_delimiters)}`],a);if(!0===a.ignore_last_delimiters&&!1===a.columns)throw new p("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",
["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],a);if(void 0===a.info||null===a.info||!1===a.info)a.info=!1;else if(!0!==a.info)throw Error(`Invalid Option: info must be true, got ${JSON.stringify(a.info)}`);if(void 0===a.max_record_size||null===a.max_record_size||!1===a.max_record_size)a.max_record_size=0;else if(!(Number.isInteger(a.max_record_size)&&0<=a.max_record_size))if("string"===typeof a.max_record_size&&/\d+/.test(a.max_record_size))a.max_record_size=
parseInt(a.max_record_size);else throw Error(`Invalid Option: max_record_size must be a positive integer, got ${JSON.stringify(a.max_record_size)}`);if(void 0===a.objname||null===a.objname||!1===a.objname)a.objname=void 0;else if(C(a.objname)){if(0===a.objname.length)throw Error("Invalid Option: objname must be a non empty buffer");null!==a.encoding&&(a.objname=a.objname.toString(a.encoding))}else if("string"===typeof a.objname){if(0===a.objname.length)throw Error("Invalid Option: objname must be a non empty string");
}else if("number"!==typeof a.objname)throw Error(`Invalid Option: objname must be a string or a buffer, got ${a.objname}`);if(void 0!==a.objname)if("number"===typeof a.objname){if(!1!==a.columns)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field");}else if(!1===a.columns)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index");if(void 0===a.on_record||null===a.on_record)a.on_record=void 0;else if("function"!==
typeof a.on_record)throw new p("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,",`got ${JSON.stringify(a.on_record)}`],a);if(void 0!==a.on_skip&&null!==a.on_skip&&"function"!==typeof a.on_skip)throw Error(`Invalid Option: on_skip must be a function, got ${JSON.stringify(a.on_skip)}`);if(null===a.quote||!1===a.quote||""===a.quote)a.quote=null;else if(void 0===a.quote||!0===a.quote?a.quote=g.from('"',a.encoding):"string"===typeof a.quote&&(a.quote=g.from(a.quote,a.encoding)),
!C(a.quote))throw Error(`Invalid Option: quote must be a buffer or a string, got ${JSON.stringify(a.quote)}`);if(void 0===a.raw||null===a.raw||!1===a.raw)a.raw=!1;else if(!0!==a.raw)throw Error(`Invalid Option: raw must be true, got ${JSON.stringify(a.raw)}`);if(void 0===a.record_delimiter)a.record_delimiter=[];else if("string"===typeof a.record_delimiter||C(a.record_delimiter)){if(0===a.record_delimiter.length)throw new p("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:",
"value must be a non empty string or buffer,",`got ${JSON.stringify(a.record_delimiter)}`],a);a.record_delimiter=[a.record_delimiter]}else if(!Array.isArray(a.record_delimiter))throw new p("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,",`got ${JSON.stringify(a.record_delimiter)}`],a);a.record_delimiter=a.record_delimiter.map(function(d,e){if("string"!==typeof d&&!C(d))throw new p("CSV_INVALID_OPTION_RECORD_DELIMITER",
["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${e},`,`got ${JSON.stringify(d)}`],a);if(0===d.length)throw new p("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${e},`,`got ${JSON.stringify(d)}`],a);"string"===typeof d&&(d=g.from(d,a.encoding));return d});if("boolean"!==typeof a.relax_column_count)if(void 0===a.relax_column_count||null===a.relax_column_count)a.relax_column_count=
!1;else throw Error(`Invalid Option: relax_column_count must be a boolean, got ${JSON.stringify(a.relax_column_count)}`);if("boolean"!==typeof a.relax_column_count_less)if(void 0===a.relax_column_count_less||null===a.relax_column_count_less)a.relax_column_count_less=!1;else throw Error(`Invalid Option: relax_column_count_less must be a boolean, got ${JSON.stringify(a.relax_column_count_less)}`);if("boolean"!==typeof a.relax_column_count_more)if(void 0===a.relax_column_count_more||null===a.relax_column_count_more)a.relax_column_count_more=
!1;else throw Error(`Invalid Option: relax_column_count_more must be a boolean, got ${JSON.stringify(a.relax_column_count_more)}`);if("boolean"!==typeof a.relax_quotes)if(void 0===a.relax_quotes||null===a.relax_quotes)a.relax_quotes=!1;else throw Error(`Invalid Option: relax_quotes must be a boolean, got ${JSON.stringify(a.relax_quotes)}`);if("boolean"!==typeof a.skip_empty_lines)if(void 0===a.skip_empty_lines||null===a.skip_empty_lines)a.skip_empty_lines=!1;else throw Error(`Invalid Option: skip_empty_lines must be a boolean, got ${JSON.stringify(a.skip_empty_lines)}`);
if("boolean"!==typeof a.skip_records_with_empty_values)if(void 0===a.skip_records_with_empty_values||null===a.skip_records_with_empty_values)a.skip_records_with_empty_values=!1;else throw Error(`Invalid Option: skip_records_with_empty_values must be a boolean, got ${JSON.stringify(a.skip_records_with_empty_values)}`);if("boolean"!==typeof a.skip_records_with_error)if(void 0===a.skip_records_with_error||null===a.skip_records_with_error)a.skip_records_with_error=!1;else throw Error(`Invalid Option: skip_records_with_error must be a boolean, got ${JSON.stringify(a.skip_records_with_error)}`);
if(void 0===a.rtrim||null===a.rtrim||!1===a.rtrim)a.rtrim=!1;else if(!0!==a.rtrim)throw Error(`Invalid Option: rtrim must be a boolean, got ${JSON.stringify(a.rtrim)}`);if(void 0===a.ltrim||null===a.ltrim||!1===a.ltrim)a.ltrim=!1;else if(!0!==a.ltrim)throw Error(`Invalid Option: ltrim must be a boolean, got ${JSON.stringify(a.ltrim)}`);if(void 0===a.trim||null===a.trim||!1===a.trim)a.trim=!1;else if(!0!==a.trim)throw Error(`Invalid Option: trim must be a boolean, got ${JSON.stringify(a.trim)}`);!0===
a.trim&&!1!==b.ltrim?a.ltrim=!0:!0!==a.ltrim&&(a.ltrim=!1);!0===a.trim&&!1!==b.rtrim?a.rtrim=!0:!0!==a.rtrim&&(a.rtrim=!1);if(void 0===a.to||null===a.to)a.to=-1;else if("string"===typeof a.to&&/\d+/.test(a.to)&&(a.to=parseInt(a.to)),Number.isInteger(a.to)){if(0>=a.to)throw Error(`Invalid Option: to must be a positive integer greater than 0, got ${JSON.stringify(b.to)}`);}else throw Error(`Invalid Option: to must be an integer, got ${JSON.stringify(b.to)}`);if(void 0===a.to_line||null===a.to_line)a.to_line=
-1;else if("string"===typeof a.to_line&&/\d+/.test(a.to_line)&&(a.to_line=parseInt(a.to_line)),Number.isInteger(a.to_line)){if(0>=a.to_line)throw Error(`Invalid Option: to_line must be a positive integer greater than 0, got ${JSON.stringify(b.to_line)}`);}else throw Error(`Invalid Option: to_line must be an integer, got ${JSON.stringify(b.to_line)}`);return a},wa=function(b){return b.every(a=>null==a||a.toString&&""===a.toString().trim())},N={utf8:g.from([239,187,191]),utf16le:g.from([255,254])},
Ja=function(b={}){const a=va(b);return{info:{bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},original_options:b,options:a,state:Ca(a),__needMoreData:function(c,d,e){if(e)return!1;const {encoding:f,escape:h,quote:k}=this.options,{quoting:l,needMoreDataSize:m,recordDelimiterMaxLength:q}=this.state;c=d-c-1;d=Math.max(m,0===q?g.from("\r\n",f).length:q,l?(null===h?0:h.length)+k.length:0,l?k.length+q:0);return c<d},parse:function(c,d,e,f){const {bom:h,comment_no_infix:k,
encoding:l,from_line:m,ltrim:q,max_record_size:z,raw:H,relax_quotes:F,rtrim:v,skip_empty_lines:w,to:t,to_line:u}=this.options;let {comment:M,escape:J,quote:D,record_delimiter:da}=this.options;const {bomSkipped:Ea,previousBuf:W,rawBuffer:Fa,escapeIsQuote:Ga}=this.state;if(void 0===W){if(void 0===c){f();return}}else c=void 0!==W&&void 0===c?W:g.concat([W,c]);if(!1===Ea)if(!1===h)this.state.bomSkipped=!0;else if(3>c.length){if(!1===d){this.state.previousBuf=c;return}}else{for(var K in N)if(0===N[K].compare(c,
0,N[K].length)){var n=N[K].length;this.state.bufBytesStart+=n;c=c.slice(n);this.options=va({...this.original_options,encoding:K});({comment:M,escape:J,quote:D}=this.options);break}this.state.bomSkipped=!0}K=c.length;for(n=0;n<K&&!this.__needMoreData(n,K,d);n++){!0===this.state.wasRowDelimiter&&(this.info.lines++,this.state.wasRowDelimiter=!1);if(-1!==u&&this.info.lines>u){this.state.stop=!0;f();return}!1===this.state.quoting&&0===da.length&&this.__autoDiscoverRecordDelimiter(c,n)&&(da=this.options.record_delimiter);
var y=c[n];!0===H&&Fa.append(y);13!==y&&10!==y||!1!==this.state.wasRowDelimiter||(this.state.wasRowDelimiter=!0);if(!0===this.state.escaping)this.state.escaping=!1;else{if(null!==J&&!0===this.state.quoting&&this.__isEscape(c,n,y)&&n+J.length<K)if(Ga){if(this.__isQuote(c,n+J.length)){this.state.escaping=!0;n+=J.length-1;continue}}else{this.state.escaping=!0;n+=J.length-1;continue}if(!1===this.state.commenting&&this.__isQuote(c,n))if(!0===this.state.quoting){var r=c[n+D.length],O=v&&this.__isCharTrimable(c,
n+D.length);const X=null!==M&&this.__compareBytes(M,c,n+D.length,r),Ha=this.__isDelimiter(c,n+D.length,r),Ia=0===da.length?this.__autoDiscoverRecordDelimiter(c,n+D.length):this.__isRecordDelimiter(r,c,n+D.length);if(null!==J&&this.__isEscape(c,n,y)&&this.__isQuote(c,n+J.length))n+=J.length-1;else if(!r||Ha||Ia||X||O){this.state.quoting=!1;this.state.wasQuoting=!0;n+=D.length-1;continue}else if(!1===F){if(r=this.__error(new p("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(r)}"`,
`at line ${this.info.lines}`,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField())),void 0!==r)return r}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(D),n+=D.length-1}else if(0!==this.state.field.length){if(!1===F&&(r=this.__infoField(),O=Object.keys(N).map(X=>N[X].equals(this.state.field.toString())?X:!1).filter(Boolean)[0],r=this.__error(new p("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(r.column)} at line ${r.lines}, value is ${JSON.stringify(this.state.field.toString(l))}`,
O?`(${O} bom)`:void 0],this.options,r,{field:this.state.field})),void 0!==r))return r}else{this.state.quoting=!0;n+=D.length-1;continue}if(!1===this.state.quoting){r=this.__isRecordDelimiter(y,c,n);if(0!==r){if(this.state.commenting&&!1===this.state.wasQuoting&&0===this.state.record.length&&0===this.state.field.length)this.info.comment_lines++;else{if(!1===this.state.enabled&&this.info.lines+(!0===this.state.wasRowDelimiter?1:0)>=m){this.state.enabled=!0;this.__resetField();this.__resetRecord();n+=
r-1;continue}if(!0===w&&!1===this.state.wasQuoting&&0===this.state.record.length&&0===this.state.field.length){this.info.empty_lines++;n+=r-1;continue}this.info.bytes=this.state.bufBytesStart+n;y=this.__onField();if(void 0!==y)return y;this.info.bytes=this.state.bufBytesStart+n+r;y=this.__onRecord(e);if(void 0!==y)return y;if(-1!==t&&this.info.records>=t){this.state.stop=!0;f();return}}this.state.commenting=!1;n+=r-1;continue}if(this.state.commenting)continue;if(null!==M&&(!1===k||0===this.state.record.length&&
0===this.state.field.length)&&0!==this.__compareBytes(M,c,n,y)){this.state.commenting=!0;continue}r=this.__isDelimiter(c,n,y);if(0!==r){this.info.bytes=this.state.bufBytesStart+n;y=this.__onField();if(void 0!==y)return y;n+=r-1;continue}}}if(!1===this.state.commenting&&0!==z&&this.state.record_length+this.state.field.length>z)return this.__error(new p("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes",`of ${z}`,`at line ${this.info.lines}`],this.options,
this.__infoField()));r=!1===q||!0===this.state.quoting||0!==this.state.field.length||!this.__isCharTrimable(c,n);O=!1===v||!1===this.state.wasQuoting;if(!0===r&&!0===O)this.state.field.append(y);else if(!0!==v||this.__isCharTrimable(c,n))!1===r&&(n+=this.__isCharTrimable(c,n)-1);else return this.__error(new p("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote",`at line ${this.info.lines}`],this.options,this.__infoField()))}if(!0===d)if(!0===
this.state.quoting){if(e=this.__error(new p("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:",`the parsing is finished with an opening quote at line ${this.info.lines}`],this.options,this.__infoField())),void 0!==e)return e}else if(!0===this.state.wasQuoting||0!==this.state.record.length||0!==this.state.field.length){this.info.bytes=this.state.bufBytesStart+n;d=this.__onField();if(void 0!==d)return d;e=this.__onRecord(e);if(void 0!==e)return e}else!0===this.state.wasRowDelimiter?this.info.empty_lines++:
!0===this.state.commenting&&this.info.comment_lines++;else this.state.bufBytesStart+=n,this.state.previousBuf=c.slice(n);!0===this.state.wasRowDelimiter&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(c){const {columns:d,group_columns_by_name:e,encoding:f,info:h,from:k,relax_column_count:l,relax_column_count_less:m,relax_column_count_more:q,raw:z,skip_records_with_empty_values:H}=this.options,{enabled:F,record:v}=this.state;if(!1===F)return this.__resetRecord();var w=v.length;
if(!0===d){if(!0===H&&wa(v)){this.__resetRecord();return}return this.__firstLineToColumns(v)}!1===d&&0===this.info.records&&(this.state.expectedRecordLength=w);if(w!==this.state.expectedRecordLength){var t=!1===d?new p("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${w} on line ${this.info.lines}`],this.options,this.__infoField(),{record:v}):new p("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${d.length},`,
`got ${w} on line ${this.info.lines}`],this.options,this.__infoField(),{record:v});if(!0===l||!0===m&&w<this.state.expectedRecordLength||!0===q&&w>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=t;else if(w=this.__error(t))return w}if(!0===H&&wa(v))this.__resetRecord();else if(!0===this.state.recordHasError)this.__resetRecord(),this.state.recordHasError=!1;else{this.info.records++;if(1===k||this.info.records>=k)if({objname:w}=this.options,!1!==d){t={};for(let u=0,
M=v.length;u<M;u++)void 0===d[u]||d[u].disabled||(!0===e&&void 0!==t[d[u].name]?Array.isArray(t[d[u].name])?t[d[u].name]=t[d[u].name].concat(v[u]):t[d[u].name]=[t[d[u].name],v[u]]:t[d[u].name]=v[u]);if(!0===z||!0===h){const u=Object.assign({record:t},!0===z?{raw:this.state.rawBuffer.toString(f)}:{},!0===h?{info:this.__infoRecord()}:{});if(c=this.__push(void 0===w?u:[t[w],u],c))return c}else if(c=this.__push(void 0===w?t:[t[w],t],c))return c}else if(!0===z||!0===h){if(t=Object.assign({record:v},!0===
z?{raw:this.state.rawBuffer.toString(f)}:{},!0===h?{info:this.__infoRecord()}:{}),c=this.__push(void 0===w?t:[v[w],t],c))return c}else if(c=this.__push(void 0===w?v:[v[w],v],c))return c;this.__resetRecord()}},__firstLineToColumns:function(c){const {firstLineToHeaders:d}=this.state;try{const e=void 0===d?c:d.call(null,c);if(!Array.isArray(e))return this.__error(new p("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,",`got ${JSON.stringify(e)}`],this.options,
this.__infoField(),{headers:e}));const f=ta(e);this.state.expectedRecordLength=f.length;this.options.columns=f;this.__resetRecord()}catch(e){return e}},__resetRecord:function(){!0===this.options.raw&&this.state.rawBuffer.reset();this.state.error=void 0;this.state.record=[];this.state.record_length=0},__onField:function(){const {cast:c,encoding:d,rtrim:e,max_record_size:f}=this.options,{enabled:h,wasQuoting:k}=this.state;if(!1===h)return this.__resetField();let l=this.state.field.toString(d);!0===
e&&!1===k&&(l=l.trimRight());if(!0===c){const [m,q]=this.__cast(l);if(void 0!==m)return m;l=q}this.state.record.push(l);0!==f&&"string"===typeof l&&(this.state.record_length+=l.length);this.__resetField()},__resetField:function(){this.state.field.reset();this.state.wasQuoting=!1},__push:function(c,d){const {on_record:e}=this.options;if(void 0!==e){const f=this.__infoRecord();try{c=e.call(null,c,f)}catch(h){return h}if(void 0===c||null===c)return}d(c)},__cast:function(c){const {columns:d,relax_column_count:e}=
this.options;if(!0===Array.isArray(d)&&e&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(null!==this.state.castField)try{var f=this.__infoField();return[void 0,this.state.castField.call(null,c,f)]}catch(h){return[h]}return this.__isFloat(c)?[void 0,parseFloat(c)]:!1!==this.options.cast_date?(f=this.__infoField(),[void 0,this.options.cast_date.call(null,c,f)]):[void 0,c]},__isCharTrimable:function(c,d){return((e,f)=>{const {timchars:h}=this.state;a:for(let k=0;k<h.length;k++){const l=
h[k];for(let m=0;m<l.length;m++)if(l[m]!==e[f+m])continue a;return l.length}return 0})(c,d)},__isFloat:function(c){return 0<=c-parseFloat(c)+1},__compareBytes:function(c,d,e,f){if(c[0]!==f)return 0;f=c.length;for(let h=1;h<f;h++)if(c[h]!==d[e+h])return 0;return f},__isDelimiter:function(c,d,e){const {delimiter:f,ignore_last_delimiters:h}=this.options;if(!0===h&&this.state.record.length===this.options.columns.length-1||!1!==h&&"number"===typeof h&&this.state.record.length===h-1)return 0;a:for(let k=
0;k<f.length;k++){const l=f[k];if(l[0]===e){for(let m=1;m<l.length;m++)if(l[m]!==c[d+m])continue a;return l.length}}return 0},__isRecordDelimiter:function(c,d,e){const {record_delimiter:f}=this.options,h=f.length;a:for(let k=0;k<h;k++){const l=f[k],m=l.length;if(l[0]===c){for(let q=1;q<m;q++)if(l[q]!==d[e+q])continue a;return l.length}}return 0},__isEscape:function(c,d,e){const {escape:f}=this.options;if(null===f)return!1;const h=f.length;if(f[0]===e){for(e=0;e<h;e++)if(f[e]!==c[d+e])return!1;return!0}return!1},
__isQuote:function(c,d){const {quote:e}=this.options;if(null===e)return!1;const f=e.length;for(let h=0;h<f;h++)if(e[h]!==c[d+h])return!1;return!0},__autoDiscoverRecordDelimiter:function(c,d){var {encoding:e}=this.options;e=[g.from("\r\n",e),g.from("\n",e),g.from("\r",e)];a:for(let f=0;f<e.length;f++){const h=e[f].length;for(let k=0;k<h;k++)if(e[f][k]!==c[d+k])continue a;this.options.record_delimiter.push(e[f]);this.state.recordDelimiterMaxLength=e[f].length;return e[f].length}return 0},__error:function(c){const {encoding:d,
raw:e,skip_records_with_error:f}=this.options;c="string"===typeof c?Error(c):c;if(f){if(this.state.recordHasError=!0,void 0!==this.options.on_skip)this.options.on_skip(c,e?this.state.rawBuffer.toString(d):void 0)}else return c},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){const {columns:c,raw:d,encoding:e}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:!0===c,index:this.state.record.length,raw:d?this.state.rawBuffer.toString(e):
void 0}},__infoField:function(){const {columns:c}=this.options,d=Array.isArray(c);return{...this.__infoRecord(),column:!0===d?c.length>this.state.record.length?c[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}};Y.CsvError=p;Y.parse=function(b,a={}){"string"===typeof b&&(b=g.from(b));const c=a&&a.objname?{}:[],d=Ja(a);a=f=>{void 0===d.options.objname?c.push(f):c[f[0]]=f[1]};const e=()=>{};b=d.parse(b,!1,a,e);if(void 0!==b)throw b;b=d.parse(void 0,!0,a,
e);if(void 0!==b)throw b;return c};return Y}({});