<script lang="ts">
	import Fab, { Icon } from '@smui/fab';
	import type { LayoutField } from '$lib/types';
	import { createEventDispatcher } from 'svelte';

	export let value: any = 0; // any because of weird casting to generic data
	export let field: LayoutField;
	export let allowNegative: boolean = false;
	export let isBad = false;
	export let isDefaultValue: boolean;
	$: isDefaultValue = (value === 0);
	const dispatch = createEventDispatcher();
	const changeByValue = (change: number) => {
		value = (allowNegative ? value + change : Math.max(0, value + change));
		dispatch('change');
	};
</script>

<div>
	<Fab mini class={!isBad ? 'bad' : 'good'} on:click={() => changeByValue(-1)}>
		<Icon class="material-icons">remove</Icon>
	</Fab>
	<span>{field.label}: {value}</span>
	<Fab mini class={!isBad ? 'good' : 'bad'} on:click={() => changeByValue(1)}>
		<Icon class="material-icons">add</Icon>
	</Fab>
</div>

<style lang="scss">
	@use '@material/fab/index' as mdc-fab;
	@use '@material/theme/color-palette';

	div {
		display: flex;
		flex-direction: row;
		align-items: center;
		justify-content: space-between;
	}

	:global(.good) {
		@include mdc-fab.accessible(color-palette.$blue-300);
	}
	:global(.bad) {
		@include mdc-fab.accessible(color-palette.$red-900);
		@include mdc-fab.shape-radius(25%);
	}
</style>
